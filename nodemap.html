<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Embedded Leaflet Map</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

    <style>
      body {
        margin: 0;
      }
      #mapid {
        width: 100%;
        height: 400px;
      }
      img.grayNode {
        filter: grayscale(100%);
      }
      img.orangeNode {
        filter: grayscale(100%) sepia(100%) hue-rotate(335deg) saturate(500%);
      }
    </style>
  </head>
  <body>
    <div id="mapid"></div>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <script>
      var map = L.map("mapid").setView([40, 0], 1);
      const routerIcon = L.icon({
        iconUrl: "https://hackmd.io/_uploads/B1fvzIpy-l.png",
        iconSize: [30, 25],
      });
      const grayRouterIcon = L.icon({
        iconUrl: "https://hackmd.io/_uploads/B1fvzIpy-l.png",
        iconSize: [30, 25],
      });
      var nodes = [
        {
          name: "TXG",
          location: "Taichung, Taiwan",
          flag: "ðŸ‡¹ðŸ‡¼",
          lon: 120.68115,
          lat: 24.1047,
          desc: "AS17809 VEE TIME CORP.",
        },
        {
          name: "TYO",
          location: "Tokyo, Japan",
          flag: "ðŸ‡¯ðŸ‡µ",
          lon: 140.1232,
          lat: 35.81839,
          desc: "AS31898 Oracle Corporation",
        },
        {
          name: "LAX",
          location: "Los Angeles, CA, United States",
          flag: "ðŸ‡ºðŸ‡¸",
          lon: -118.26628,
          lat: 34.05122,
          desc: "AS36352 HostPapa",
        },
        {
          name: "BRN",
          location: "Bern, Switzerland",
          flag: "ðŸ‡¨ðŸ‡­",
          lon: 7.44743,
          lat: 46.94798,
          desc: " AS53667 FranTech Solutions",
        },
        {
          name: "YYZ",
          location: "Toronto, ON, Canada",
          flag: "ðŸ‡¨ðŸ‡¦",
          lon: -79.38422912449562,
          lat: 43.644632654354226,
          desc: "AS36352 HostPapa",
        },
        {
          name: "HKG",
          location: "Hong Kong SAR",
          flag: "ðŸ‡­ðŸ‡°",
          lon: 114.11921574773736,
          lat: 22.36227599254746, 
          desc: "AS214439 Zhuhai Xiyun Cloud Technology Co., Ltd.",
        },
        {
          name: "SLC",
          location: "Salt Lake City, UT, United States",
          flag: "ðŸ‡ºðŸ‡¸",
          lon: -111.88771632795,
          lat: 40.51144284746243,
          desc: "AS53808 MoeDove",
        },
        {
          name: "HGH",
          location: "Shaoxing, Zhejiang, China",
          flag: "ðŸ‡¨ðŸ‡³",
          lon: 120.586,
          lat: 29.995,
          desc: "AS9808 China Telecom Backbone",
        },
        {
          name: "TFU",
          location: "Chengdu, Sichuan, China",
          flag: "ðŸ‡¨ðŸ‡³",
          lon: 104.444731,
          lat: 30.323036,
          desc: "AS9808 China Mobile Backbone",
        },
      ];

      L.tileLayer(
        "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png'",
        {
          maxZoom: 19,
          attribution:
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        }
      ).addTo(map);
      var southWest = L.latLng(-89.98155760646617, -180),
        northEast = L.latLng(89.99346179538875, 180);
      var bounds = L.latLngBounds(southWest, northEast);

      map.setMaxBounds(bounds);
      map.on("drag", function () {
        map.panInsideBounds(bounds, { animate: false });
      });
      for (const node of nodes) {
        var marker = L.marker([node.lat, node.lon], { icon: routerIcon })
          .addTo(map)
          .bindPopup(
            `${node.name}<br>${node.flag} ${node.location}<br>${node.desc}${
              node.upcoming||node.dead ? `<br><b>${node.upcoming?"Upcoming":"Dead"}!</b>` : ""
            }`
          );
        if (node.upcoming) marker._icon.classList.add("grayNode");
        if (node.dead) marker._icon.classList.add("orangeNode");
      }
    </script>
  </body>
</html>







